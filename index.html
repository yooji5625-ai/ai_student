<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë¯¸ë˜ ì„¤ê³„ ìŠ¤í…Œì´ì…˜ (Future Blueprint)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ì»¤ìŠ¤í…€ í°íŠ¸ ë° ê¸°ë³¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d0e14; /* Dark/Space background */
        }
        /* ê²°ê³¼ í…ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ìŠ¤íƒ€ì¼ (pre-wrap ìœ ì§€) */
        .result-text {
            white-space: pre-wrap;
        }
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ (ë‹¤í¬ ëª¨ë“œ ìµœì í™”) */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #007bff;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background-color: #1f2937;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-4xl rounded-xl shadow-2xl p-6 md:p-10 border-t-4 border-blue-500 bg-gray-800">

        <div id="formView" class="transition-opacity duration-500">
            <h1 class="text-3xl md:text-4xl font-extrabold text-white uppercase tracking-wider text-center pb-3 mb-6 border-b-2 border-yellow-400">
                AI ë¯¸ë˜ ì„¤ê³„ ìŠ¤í…Œì´ì…˜ 
            </h1>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="flex flex-col">
                    <label for="nickname" class="text-yellow-400 font-bold mb-1 uppercase text-sm">ë‹‰ë„¤ì„</label>
                    <input type="text" id="nickname" placeholder="ì„ ìˆ˜ëª… (ë‹‰ë„¤ì„)" required
                           class="p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition duration-300">
                </div>

                <div class="flex flex-col">
                    <label for="targetTime" class="text-yellow-400 font-bold mb-1 uppercase text-sm">ë‹¬ì„± í¬ë§ ì‹œì  (ì˜ˆ: 2028ë…„ 12ì›”)</label>
                    <input type="text" id="targetTime" placeholder="ëª©í‘œ ë‹¬ì„± ë°ë“œë¼ì¸" required
                           class="p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition duration-300">
                </div>
                
                <div class="flex flex-col md:col-span-2">
                    <label for="mainGoal" class="text-yellow-400 font-bold mb-1 uppercase text-sm">í˜„ì¬ ê°€ì¥ ì¤‘ìš”í•œ ëª©í‘œ</label>
                    <textarea id="mainGoal" placeholder="êµ¬ì²´ì ì¸ ëª©í‘œë¥¼ ì„¤ëª…í•´ ì£¼ì„¸ìš”." required
                              class="p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition duration-300 resize-y min-h-[100px]"></textarea>
                </div>

                <div class="flex flex-col">
                    <label for="myStrength" class="text-yellow-400 font-bold mb-1 uppercase text-sm">í˜„ì¬ ë‚˜ì˜ ê°•ì </label>
                    <textarea id="myStrength" placeholder="ëª©í‘œ ë‹¬ì„±ì— ë„ì›€ì´ ë  ê°•ì /ìì›"
                              class="p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition duration-300 resize-y min-h-[100px]"></textarea>
                </div>

                <div class="flex flex-col">
                    <label for="obstacle" class="text-yellow-400 font-bold mb-1 uppercase text-sm">ì¥ì• ë¬¼ (ì„ íƒ ì‚¬í•­)</label>
                    <textarea id="obstacle" placeholder="ëª©í‘œ ë‹¬ì„±ì„ ê°€ë¡œë§‰ëŠ” ìš”ì†Œ"
                              class="p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition duration-300 resize-y min-h-[100px]"></textarea>
                </div>
            </div>
            
            <button onclick="register()"
                    class="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-extrabold text-lg uppercase rounded-lg shadow-xl transition duration-300 transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50">
                ë¯¸ë˜ ìƒì„± (Go!)
            </button>
            
            </div>

        <div id="resultView" class="hidden transition-opacity duration-500">
            <h1 class="text-3xl md:text-4xl font-extrabold text-white uppercase tracking-wider text-center pb-3 mb-6 border-b-2 border-yellow-400">
                âœ… AI ë¯¸ë˜ ì„¤ê³„ ê²°ê³¼
            </h1>
            
            <div class="bg-gray-700 border-2 border-yellow-400 rounded-lg p-6">
                <h2 class="text-2xl text-blue-400 font-bold uppercase mb-4 border-b border-gray-600 pb-2">
                    ì„ ìˆ˜: <span id="resultNickname" class="text-yellow-400"></span>
                </h2>
                <p class="text-gray-400 mb-6">ëª©í‘œ ë‹¬ì„± ì‹œì : <span id="resultTargetTime" class="text-white"></span></p>

                <div class="mb-4">
                    <label class="text-white font-medium block mb-2 text-lg">âœ¨ AI ì°½ì‘ ë¯¸ë˜ ì‹œë‚˜ë¦¬ì˜¤ (3ì¤„ ìš”ì•½)</label>
                    <div id="scenarioResult"
                         class="result-text bg-gray-900 p-4 rounded-lg text-gray-300 text-base border-l-4 border-yellow-400 min-h-[100px] custom-scrollbar overflow-y-auto max-h-60 animate-pulse">
                        ë°ì´í„° ë¡œë”© ì¤‘...
                    </div>
                </div>

                <div>
                    <label class="text-white font-medium block mb-2 text-lg">ğŸ—ºï¸ ë¯¸ë˜ ëª©í‘œ ë‹¬ì„± ë¡œë“œë§µ (ë‹¨ê³„ë³„)</label>
                    <div id="roadmapResult"
                         class="result-text bg-gray-900 p-4 rounded-lg text-gray-300 text-base border-l-4 border-yellow-400 min-h-[100px] custom-scrollbar overflow-y-auto max-h-60 animate-pulse">
                        ë°ì´í„° ë¡œë”© ì¤‘...
                    </div>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 mt-8">
                <button id="resetButton" onclick="resetForm()"
                        class="flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-lg transition duration-300">
                    ìƒˆë¡œìš´ ì„¤ê³„ ì‹œì‘ (ì´ˆê¸°í™”)
                </button>
                <button onclick="showModal('saveResult')"
                        class="flex-1 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition duration-300">
                    ê²°ê³¼ ì €ì¥ (FireStore ì—°ë™ ì˜ˆì •)
                </button>
            </div>
        </div>
    </div>

    <div id="customModal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center p-4 z-50">
        <div class="bg-gray-800 rounded-xl p-6 w-full max-w-sm transform transition-all shadow-2xl border-t-4 border-blue-500">
            <h3 id="modalTitle" class="text-xl font-bold text-yellow-400 mb-4 border-b border-gray-600 pb-2">ì•Œë¦¼</h3>
            <p id="modalMessage" class="text-gray-300 mb-6"></p>
            <div class="flex justify-end">
                <button onclick="hideModal()"
                        class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition duration-300">
                    í™•ì¸
                </button>
            </div>
        </div>
    </div>

    <script>
        // í•µì‹¬ ìš”êµ¬ ì‚¬í•­: API ì„œë²„ ì£¼ì†Œ ìƒìˆ˜ ì •ì˜
        const SERVER_URL = "https://5fba4e22-38bd-4480-ae7c-4b45c60bef37-00-35tq355ifgik8.pike.replit.dev/register"; // << ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ë°±ì—”ë“œ ì„œë²„ ì£¼ì†Œë¥¼ ì—¬ê¸°ì— ì‚½ì…í•©ë‹ˆë‹¤.

        // --- View Elements ---
        const formView = document.getElementById('formView');
        const resultView = document.getElementById('resultView');
        const scenarioResult = document.getElementById('scenarioResult');
        const roadmapResult = document.getElementById('roadmapResult');
        const resultNickname = document.getElementById('resultNickname');
        const resultTargetTime = document.getElementById('resultTargetTime');

        // --- Modal Functions ---
        const modal = document.getElementById('customModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');

        /**
         * ì»¤ìŠ¤í…€ ëª¨ë‹¬ì„ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜.
         * @param {string} type - 'validation', 'error', 'nextStep', 'saveResult' ì¤‘ í•˜ë‚˜ ë˜ëŠ” ì¼ë°˜ ë©”ì‹œì§€ ë¬¸ìì—´.
         * @param {string=} message - í‘œì‹œí•  ë©”ì‹œì§€ (typeì´ ì¼ë°˜ ë©”ì‹œì§€ì¼ ë•Œ ì‚¬ìš©).
         */
        function showModal(type, message = '') {
            if (type === 'validation') {
                modalTitle.innerText = "ğŸš¨ í•„ìˆ˜ ì •ë³´ ëˆ„ë½";
                modalMessage.innerText = "ë‹‰ë„¤ì„, ëª©í‘œ, í¬ë§ ì‹œì ì€ ë¯¸ë˜ ì„¤ê³„ë¥¼ ìœ„í•œ í•„ìˆ˜ ì…ë ¥ ì‚¬í•­ì…ë‹ˆë‹¤.";
            } else if (type === 'error') {
                modalTitle.innerText = "âŒ í†µì‹  ì˜¤ë¥˜";
                modalMessage.innerText = message || "API í†µì‹ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì„œë²„ URL ë° ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.";
            } else if (type === 'nextStep') {
                modalTitle.innerText = "âœ… ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„ ì™„ë£Œ";
                modalMessage.innerText = "ì´ ì½”ë“œë¥¼ GitHub Pagesì— ë°°í¬í•˜ê³ , ë‹¤ìŒ ì£¼ì°¨ì— Backend ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì—¬ SERVER_URLì— ì—°ê²°í•  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!";
            } else if (type === 'saveResult') {
                modalTitle.innerText = "ğŸ’¾ ì €ì¥ ê¸°ëŠ¥ ì•ˆë‚´";
                modalMessage.innerText = "ì´ ê¸°ëŠ¥ì€ ë‹¤ìŒ ì£¼ì°¨ì— Firestore ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ì„ í†µí•´ êµ¬í˜„ë  ì˜ˆì •ì…ë‹ˆë‹¤.";
            }
             else {
                modalTitle.innerText = "ì•Œë¦¼";
                modalMessage.innerText = type; // type ìì²´ë¥¼ ë©”ì‹œì§€ë¡œ ì‚¬ìš©
            }
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        /**
         * ì»¤ìŠ¤í…€ ëª¨ë‹¬ì„ ìˆ¨ê¸°ëŠ” í•¨ìˆ˜.
         */
        function hideModal() {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }
        
        /**
         * ì…ë ¥ í¼ì„ ìˆ¨ê¸°ê³  ê²°ê³¼ ë·°ë¥¼ í‘œì‹œí•˜ë©° ë°ì´í„°ë¥¼ ì±„ì›ë‹ˆë‹¤.
         * @param {Object} data - ì‚¬ìš©ì ì…ë ¥ ë°ì´í„°.
         * @param {Object} resultData - AI ê²°ê³¼ ë°ì´í„°.
         */
        function displayResultView(data, resultData) {
            // ê²°ê³¼ í—¤ë” ì •ë³´ ì—…ë°ì´íŠ¸
            resultNickname.innerText = data.nickname;
            resultTargetTime.innerText = data.targetTime;

            // ê²°ê³¼ ë‚´ìš© ì—…ë°ì´íŠ¸
            scenarioResult.innerText = resultData.scenario || "AI ì‹œë‚˜ë¦¬ì˜¤ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";
            roadmapResult.innerText = resultData.roadmap || "AI ë¡œë“œë§µ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";

            // ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ì œê±°
            scenarioResult.classList.remove('animate-pulse');
            roadmapResult.classList.remove('animate-pulse');

            // ë·° ì „í™˜: í¼ ìˆ¨ê¸°ê¸°, ê²°ê³¼ í‘œì‹œ
            formView.classList.add('hidden');
            resultView.classList.remove('hidden');
        }

        /**
         * 'ë¯¸ë˜ ìƒì„±' ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
         * ì…ë ¥ ë°ì´í„°ë¥¼ ëª¨ì•„ SERVER_URLë¡œ POST ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
         */
        function register() {
            // 1. ì…ë ¥ í•„ë“œì˜ ë°ì´í„° ìˆ˜ì§‘
            const data = {
                nickname: document.getElementById('nickname').value.trim(),
                mainGoal: document.getElementById('mainGoal').value.trim(),
                targetTime: document.getElementById('targetTime').value.trim(),
                myStrength: document.getElementById('myStrength').value.trim(),
                obstacle: document.getElementById('obstacle').value.trim()
            };

            // í•„ìˆ˜ ì…ë ¥ í•„ë“œ ê²€ì¦ (ì»¤ìŠ¤í…€ ëª¨ë‹¬ ì‚¬ìš©)
            if (!data.nickname || !data.mainGoal || !data.targetTime) {
                showModal('validation');
                return;
            }

            // ê²°ê³¼ ì˜ì—­ ì´ˆê¸°í™” (ë¡œë”© ìƒíƒœ í‘œì‹œ)
            scenarioResult.innerText = "ë°ì´í„° ì „ì†¡ ì¤‘... AIê°€ ë¯¸ë˜ë¥¼ ì„¤ê³„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.";
            roadmapResult.innerText = "ë¡œë“œë§µ ë¶„ì„ ì¤‘...";
            scenarioResult.classList.add('animate-pulse');
            roadmapResult.classList.add('animate-pulse');


            // 2. fetch í•¨ìˆ˜ë¥¼ ì´ìš©í•œ API í†µì‹  (POST)
            fetch(SERVER_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data) // ì…ë ¥ í•„ë“œì˜ ë°ì´í„°ë¥¼ ëª¨ì•„ JSON í˜•íƒœë¡œ ì„œë²„ì— ì „ì†¡
            })
            .then(response => {
                if (!response.ok) {
                    // HTTP 4xx, 5xx ì—ëŸ¬ ì²˜ë¦¬
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(resultData => {
                // ì •ìƒ ì‘ë‹µ ì‹œ, AI ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œ
                displayResultView(data, resultData);
            })
            .catch(error => {
                console.error('API í†µì‹  ì˜¤ë¥˜:', error);
                
                // 3. ì„œë²„ ì£¼ì†Œê°€ ë¹„ì–´ìˆê±°ë‚˜ í†µì‹  ì˜¤ë¥˜ ë°œìƒ ì‹œ ì²˜ë¦¬ (ê°€ìƒ ë°ì´í„° ìƒì„±)
                if (SERVER_URL === "" || !SERVER_URL.startsWith('http')) {
                    // --- ë‚ ì§œ ê³„ì‚° ë° ë¡œë“œë§µ êµ¬ì„± ë¡œì§ ---
                    const startDateTime = new Date();
                    const startDateString = `${startDateTime.getFullYear()}ë…„ ${startDateTime.getMonth() + 1}ì›” ${startDateTime.getDate()}ì¼`; // í˜„ì¬ ë‚ ì§œ
                    
                    // ëª©í‘œ ë‹¬ì„± ì‹œì  (ê°„ë‹¨í•˜ê²Œ ì—°ë„ì™€ ì›”ë§Œ ìˆë‹¤ê³  ê°€ì •)
                    const targetYearMatch = data.targetTime.match(/(\d{4})ë…„/);
                    const targetMonthMatch = data.targetTime.match(/(\d{1,2})ì›”/);

                    let roadmapContent = "";
                    let timeDifferenceInMonths = 0;

                    if (targetYearMatch && targetMonthMatch) {
                        const targetYear = parseInt(targetYearMatch[1]);
                        const targetMonth = parseInt(targetMonthMatch[1]) - 1; // JS ì›”ì€ 0ë¶€í„° ì‹œì‘
                        const targetDate = new Date(targetYear, targetMonth, startDateTime.getDate());
                        
                        // ì›” ì°¨ì´ ê³„ì‚°
                        timeDifferenceInMonths = (targetDate.getFullYear() - startDateTime.getFullYear()) * 12 + (targetDate.getMonth() - startDateTime.getMonth());
                        // ë‹¬ì„± ì‹œì ì˜ ì¼(Date)ì´ ì‹œì‘ ì¼ë³´ë‹¤ ì•ì„¤ ê²½ìš° 1ê°œì›” ì°¨ê°
                        if (targetDate.getDate() < startDateTime.getDate() && targetDate.getMonth() !== startDateTime.getMonth() ) {
                            timeDifferenceInMonths -= 1;
                        }
                    }

                    if (timeDifferenceInMonths >= 3) {
                        // **3ê°œì›” ì´ìƒ ë‚¨ì•˜ì„ ê²½ìš°: ì›”ë³„ ê³„íš**
                        let endMonth1 = new Date(startDateTime);
                        endMonth1.setMonth(endMonth1.getMonth() + Math.floor(timeDifferenceInMonths * 0.4)); // 40% ì§€ì 
                        let endMonth2 = new Date(startDateTime);
                        endMonth2.setMonth(endMonth2.getMonth() + Math.floor(timeDifferenceInMonths * 0.8)); // 80% ì§€ì 

                        const endPhase1 = `${endMonth1.getFullYear()}ë…„ ${endMonth1.getMonth() + 1}ì›”`;
                        const endPhase2 = `${endMonth2.getFullYear()}ë…„ ${endMonth2.getMonth() + 1}ì›”`;


                        roadmapContent = `[ğŸ—ºï¸ ë¯¸ë˜ ëª©í‘œ ë‹¬ì„± ë¡œë“œë§µ (ì›”ë³„ ê³„íš)]\n\n**ğŸ—“ï¸ ê³„íš ê¸°ê°„:** ${startDateString} ~ ${data.targetTime}\n**ğŸ¯ ìµœì¢… ëª©í‘œ:** ${data.mainGoal}\n\n**âœ… 1ë‹¨ê³„: í•µì‹¬ ì—­ëŸ‰ ì§‘ì¤‘ ê°•í™” (${startDateString} ~ ${endPhase1})**\n* **ê¸°ê°„:** ì•½ ${Math.floor(timeDifferenceInMonths * 0.4)}ê°œì›”ê°„. ëª©í‘œ ë‹¬ì„±ì— í•„ìš”í•œ ê¸°ë³¸ ì§€ì‹ ë° ê¸°ìˆ ì„ ì™„ë²½íˆ ìŠµë“í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.\n* **í™œë™:** ${data.myStrength || 'í•µì‹¬ ê°•ì '} ê´€ë ¨ ìµœê³  ë ˆë²¨ì˜ ì „ë¬¸ êµìœ¡ì„ ì›”ë³„ 40ì‹œê°„ ì´ìƒ ì´ìˆ˜. í¬íŠ¸í´ë¦¬ì˜¤ ì´ˆì•ˆ ì¤€ë¹„.\n* **ë§ˆì¼ìŠ¤í†¤:** ì¤‘ê°„ ëª©í‘œ 2ê°€ì§€ ì„¤ì • ë° ì´í–‰ ì™„ë£Œ.\n\n\n**ğŸš§ 2ë‹¨ê³„: ì‹¤ì „ ì ìš© ë° ì¥ì• ë¬¼ ì œê±° (${endPhase1} ~ ${endPhase2})**\n* **ê¸°ê°„:** ì•½ ${Math.floor(timeDifferenceInMonths * 0.4)}ê°œì›”ê°„. ì‹¤ë¬´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ëŠ¥ë ¥ì„ ê²€ì¦í•˜ê³  ì•½ì ì„ ë³´ì™„í•©ë‹ˆë‹¤.\n* **í™œë™:** ì‹¤ë¬´ ê·œëª¨ì˜ í”„ë¡œì íŠ¸ì— ëª©í‘œë¥¼ ì ìš©í•˜ê³ , ${data.obstacle || 'ì¥ì• ë¬¼'} ì œê±°ë¥¼ ìœ„í•œ ì›”ë³„ ì „ëµ ì‹¤í–‰ ë° í”¼ë“œë°± ë°˜ì˜.\n* **ë§ˆì¼ìŠ¤í†¤:** ìµœì¢… ëª©í‘œ ë‹¬ì„±ë¥  50% ê²€ì¦ ë° í”¼ë“œë°± 3íšŒ ë°˜ì˜.\n\n\n**ğŸš€ 3ë‹¨ê³„: ìµœì¢… ì ê²€ ë° ë‹¬ì„± (${endPhase2} ~ ${data.targetTime})**\n* **ê¸°ê°„:** ë‚¨ì€ ê¸°ê°„. ìµœì¢… ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ë§ˆì§€ë§‰ ìˆ˜ì • ë° ë³´ì™„ ë‹¨ê³„ì…ë‹ˆë‹¤.\n* **í™œë™:** ìµœì¢… ê²°ê³¼ë¬¼ ì™„ì„±ë„ë¥¼ ë†’ì´ê¸° ìœ„í•œ ìµœì¢… ìˆ˜ì • ì‘ì—… ì§„í–‰. ê²½ë ¥ í¬íŠ¸í´ë¦¬ì˜¤ ì™„ì„±.\n* **ë§ˆì¼ìŠ¤í†¤:** ${data.targetTime}ì— ëª©í‘œ ë‹¬ì„± ì™„ë£Œ ë³´ê³ ì„œ ì œì¶œ ë° ë‹¤ìŒ ë¹„ì „ ìˆ˜ë¦½.`;
                    } else {
                        // **2ê°œì›” ì´í•˜ ë‚¨ì•˜ì„ ê²½ìš°: ì£¼ê°„/ì¼ë³„ ê³„íš**
                        const targetWeek = Math.max(Math.ceil((timeDifferenceInMonths * 30.44) / 7), 1); // ë‚¨ì€ ì£¼ì°¨ (ìµœì†Œ 1ì£¼)

                        roadmapContent = `[ğŸ—ºï¸ ë¯¸ë˜ ëª©í‘œ ë‹¬ì„± ë¡œë“œë§µ (ì£¼ê°„/ì¼ë³„ ì§‘ì¤‘ ê³„íš)]\n\n**ğŸ—“ï¸ ê³„íš ê¸°ê°„:** ${startDateString} ~ ${data.targetTime}\n**ğŸ¯ ìµœì¢… ëª©í‘œ:** ${data.mainGoal}\n\n**âœ… 1ë‹¨ê³„: ê¸´ê¸‰ í˜„í™© ë¶„ì„ ë° ë³´ì™„ (1ì£¼ì°¨)**\n* **ê¸°ê°„:** ${startDateString}ë¶€í„° 7ì¼ê°„. ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ì‹œê°„ì´ ì´‰ë°•í•˜ë¯€ë¡œ, í˜„í™© íŒŒì•…ê³¼ ê¸´ê¸‰ ë³´ì™„ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.\n* **í™œë™:** í˜„ì¬ ëª©í‘œ ë‹¬ì„±ë¥ ì„ ê¸´ê¸‰ ì ê²€í•˜ê³ , ë¶€ì¡±í•œ ë¶€ë¶„ì— ëŒ€í•œ ì¼ì¼ ì§‘ì¤‘ í•™ìŠµ ë° ì‹¤ìŠµ ê³„íš ìˆ˜ë¦½.\n* **ë§ˆì¼ìŠ¤í†¤:** ${data.myStrength || 'í•µì‹¬ ê°•ì '}ì„ ìµœì¢… ê²°ê³¼ë¬¼ì— 100% ë°˜ì˜í•  ë°©ì•ˆ í™•ì •.\n\n\n**ğŸš§ 2ë‹¨ê³„: ì£¼ê°„ ë‹¨ìœ„ ìµœì¢… ì‹¤í–‰ (2ì£¼ì°¨ ~ ${targetWeek}ì£¼ì°¨)**\n* **ê¸°ê°„:** ëª©í‘œ ì‹œì  ì§ì „ê¹Œì§€ ì£¼ê°„ ë‹¨ìœ„ë¡œ ì‹¤í–‰. ì‹¤í–‰ ì†ë„ì™€ ì™„ì„±ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n* **í™œë™:** ${data.obstacle || 'ë‚¨ì€ ì¥ì• ë¬¼'}ì„ ë§¤ì¼ 2ì‹œê°„ì”© ì§‘ì¤‘ì ìœ¼ë¡œ í•´ê²°í•˜ëŠ” ì‘ì—… ì§„í–‰. ìµœì¢… ê²°ê³¼ë¬¼ ì œì‘ ì†ë„ ìµœëŒ€í™”.\n* **ë§ˆì¼ìŠ¤í†¤:** ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ëª¨ë“  í•„ìˆ˜ ìš”ì†Œ(ìë£Œ, ì½”ë“œ, ë””ìì¸ ë“±) 90% ì™„ì„±.\n\n\n**ğŸš€ 3ë‹¨ê³„: ìµœì¢… ì œì¶œ ë° ì •ë¦¬ (ìµœì¢… ì£¼ì°¨)**\n* **ê¸°ê°„:** ìµœì¢… ëª©í‘œ ì‹œì ê¹Œì§€.\n* **í™œë™:** ìµœì¢… ê²°ê³¼ë¬¼ ê²€í†  ë° ì œì¶œ. íœ´ì‹ ë° íšŒê³ ë¡ ì‘ì„±.\n* **ë§ˆì¼ìŠ¤í†¤:** ${data.targetTime} ëª©í‘œ ë‹¬ì„± ì™„ë£Œ. ì´í›„ ê²½ë ¥ ê³„íš 1ì°¨ êµ¬ìƒ.`;
                    }

                    const mockResult = {
                        scenario: `[âœ¨ ${data.targetTime} ë¯¸ë˜ ì„±ê³µ ìš”ì•½ (í˜„ì‹¤ì )]\n\n1. ${data.nickname}ë‹˜ì€ ${data.targetTime}ê¹Œì§€ ì„¤ì •í•œ ëª©í‘œ("${data.mainGoal}")ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì´í–‰í•˜ë©° ì „ë¬¸ì„±ì„ ì¸ì •ë°›ì•˜ìŠµë‹ˆë‹¤.\n2. ì „ëµì ì¸ ê°•ì (${data.myStrength || 'ë¯¸ì…ë ¥ëœ ê°•ì '}) í™œìš©ê³¼ ì¥ì• ë¬¼(${data.obstacle || 'ì—†ìŒ'}) ì‚¬ì „ ì œê±° ë…¸ë ¥ì´ ì„±ê³¼ ë‹¬ì„±ì˜ í•µì‹¬ ìš”ì¸ì´ì—ˆìŠµë‹ˆë‹¤.\n3. ëª©í‘œ ë‹¬ì„± í›„, ì—…ê³„ í‰ê·  ëŒ€ë¹„ 15% ì´ìƒ ë†’ì€ ë§Œì¡±ë„ì™€ í•¨ê»˜ ë‹¤ìŒ ë‹¨ê³„ì˜ ê²½ë ¥ ì„¤ê³„ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.`,
                        roadmap: roadmapContent
                    };
                    displayResultView(data, mockResult);

                } else {
                    // ì‹¤ì œ í†µì‹  ì˜¤ë¥˜ ì‹œ ëª¨ë‹¬ í‘œì‹œ
                    showModal('error', `í†µì‹ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${error.message}`);
                    // ë¡œë”© ìƒíƒœ ì´ˆê¸°í™”
                    scenarioResult.classList.remove('animate-pulse');
                    roadmapResult.classList.remove('animate-pulse');
                }
            });
        }
        
        /**
         * í¼ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê³  í¼ ë·°ë¡œ ëŒì•„ê°€ëŠ” í•¨ìˆ˜
         */
        function resetForm() {
            // í¼ ë°ì´í„° ì´ˆê¸°í™”
            document.getElementById('nickname').value = '';
            document.getElementById('mainGoal').value = '';
            document.getElementById('targetTime').value = '';
            document.getElementById('myStrength').value = '';
            document.getElementById('obstacle').value = '';

            // ë·° ì „í™˜: ê²°ê³¼ ìˆ¨ê¸°ê¸°, í¼ í‘œì‹œ
            resultView.classList.add('hidden');
            formView.classList.remove('hidden');

            console.log("í¼ì´ ì´ˆê¸°í™”ë˜ê³  ì´ˆê¸° í™”ë©´ìœ¼ë¡œ ëŒì•„ê°”ìŠµë‹ˆë‹¤.");
        }
        
    </script>
</body>

</html>

